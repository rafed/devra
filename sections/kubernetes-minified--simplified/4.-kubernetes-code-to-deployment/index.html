<!doctype html><html lang=en-us><head><title>#04 - Kubernetes: From Writing Code to Deploying in Kubernetes |
DevRa
</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><link rel=canonical href=https://rafed.github.io/devra/sections/kubernetes-minified--simplified/4.-kubernetes-code-to-deployment/><link rel=icon type=image/png href=https://rafed.github.io/devra/image/favicon.ico><meta name=description content="
    A typical Kubernetes workflow follows the following steps-

Write code
Containerize app
Send to container registry
Deploy to Kubernetes


    graph TD
    A[Write Code] --> B
    B[Containerzie app] --> C
    C[Send to container registry] --> D[Deploy to Kubernetes]

1. Write Code
This step is pretty self explanatory. We write code that solves a business problem. For microservices/distributed systems we write code in multiple small cohesive services so that they can be deployed independently.
    "><meta property="og:description" content="
    A typical Kubernetes workflow follows the following steps-

Write code
Containerize app
Send to container registry
Deploy to Kubernetes


    graph TD
    A[Write Code] --> B
    B[Containerzie app] --> C
    C[Send to container registry] --> D[Deploy to Kubernetes]

1. Write Code
This step is pretty self explanatory. We write code that solves a business problem. For microservices/distributed systems we write code in multiple small cohesive services so that they can be deployed independently.
    "><meta property="og:image" content="https://rafed.github.io/devra/sections/kubernetes-minified--simplified/4.-kubernetes-code-to-deployment/cover.png"><meta property="og:title" content="#04 - Kubernetes: From Writing Code to Deploying in Kubernetes"><meta property="og:type" content="article"><meta property="og:url" content="https://rafed.github.io/devra/sections/kubernetes-minified--simplified/4.-kubernetes-code-to-deployment/"><meta property="article:section" content="sections"><meta property="article:published_time" content="2021-09-07T00:00:00+00:00"><meta property="article:modified_time" content="2021-09-07T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://rafed.github.io/devra/sections/kubernetes-minified--simplified/4.-kubernetes-code-to-deployment/cover.png"><meta name=twitter:title content="#04 - Kubernetes: From Writing Code to Deploying in Kubernetes"><meta name=twitter:description content="A typical Kubernetes workflow follows the following steps-
Write code Containerize app Send to container registry Deploy to Kubernetes graph TD A[Write Code] --> B B[Containerzie app] --> C C[Send to container registry] --> D[Deploy to Kubernetes] 1. Write Code This step is pretty self explanatory. We write code that solves a business problem. For microservices/distributed systems we write code in multiple small cohesive services so that they can be deployed independently."><meta itemprop=name content="#04 - Kubernetes: From Writing Code to Deploying in Kubernetes"><meta itemprop=description content="A typical Kubernetes workflow follows the following steps-
Write code Containerize app Send to container registry Deploy to Kubernetes graph TD A[Write Code] --> B B[Containerzie app] --> C C[Send to container registry] --> D[Deploy to Kubernetes] 1. Write Code This step is pretty self explanatory. We write code that solves a business problem. For microservices/distributed systems we write code in multiple small cohesive services so that they can be deployed independently."><meta itemprop=datePublished content="2021-09-07T00:00:00+00:00"><meta itemprop=dateModified content="2021-09-07T00:00:00+00:00"><meta itemprop=wordCount content="522"><meta itemprop=image content="https://rafed.github.io/devra/sections/kubernetes-minified--simplified/4.-kubernetes-code-to-deployment/cover.png"><meta itemprop=keywords content="Cloud,Kubernetes"><link rel=stylesheet href=/devra/main.min.css><script src=/devra/bundle.js></script><script data-ad-client=ca-pub-7125931910131040 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-CD8YE5ES29"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-CD8YE5ES29")</script><script defer src=/devra/mermaid/mermaid.min.js></script></head><body><header id=header><div class=top-bar><div class=container-md><div class="row align-items-center"><div class="col-3 col-sm-4 social-buttons d-none d-sm-block"><ul><li><a href=https://www.facebook.com/devrafed target=_blank><i class="fab fa-facebook"></i></a></li><li><a href=https://x.com/rafedyasir target=_blank><i class="fab fa-twitter"></i></a></li><li><a href=https://www.youtube.com/channel/UC5NjXdWBtuSiY4QcU0nh_JA target=_blank><i class="fab fa-youtube"></i></a></li><li><a href=https://www.instagram.com/rafedyasir/ target=_blank><i class="fab fa-instagram"></i></a></li><li><a href=https://github.com/rafed target=_blank><i class="fab fa-github"></i></a></li><li><a href=https://www.linkedin.com/in/rafed-m-yasir/ target=_blank><i class="fab fa-linkedin"></i></a></li></ul></div><div class="ra-toggler col-3 col-sm-4 d-block d-sm-none"><button class=bg-dark type=button data-bs-toggle=collapse data-bs-target=#navbarNav>
<i class="fas fa-bars"></i></button></div><div class="col-6 col-sm-4"><h2 class=title><a href=/>DevRa</a></h2></div><div class="col-3 col-sm-4"><div class="col col-md-8 offset-md-4 d-none d-sm-block"><form id=cse-search-box-form-id class="input-group search-bar" onsubmit='return executeQuery("lg")' role=search><input id=cse-search-input-box-id type=text class=form-control placeholder=Search>
<button class=btn type=submit>
<i class="fa fa-search"></i></button></form></div></div></div></div></div><div class=container-md><nav class="navbar navbar-expand-sm navbar-dark bg-dark"><div class="collapse navbar-collapse" id=navbarNav><ul class="navbar-nav mx-auto"><li class="nav-item d-block d-sm-none"><ul class=social-buttons><ul><li><a href=https://www.facebook.com/devrafed target=_blank><i class="fab fa-facebook"></i></a></li><li><a href=https://x.com/rafedyasir target=_blank><i class="fab fa-twitter"></i></a></li><li><a href=https://www.youtube.com/channel/UC5NjXdWBtuSiY4QcU0nh_JA target=_blank><i class="fab fa-youtube"></i></a></li><li><a href=https://www.instagram.com/rafedyasir/ target=_blank><i class="fab fa-instagram"></i></a></li><li><a href=https://github.com/rafed target=_blank><i class="fab fa-github"></i></a></li><li><a href=https://www.linkedin.com/in/rafed-m-yasir/ target=_blank><i class="fab fa-linkedin"></i></a></li></ul></ul></li><li class=nav-item><a class=nav-link href=/devra/>Home</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-bs-toggle=dropdown>Blog</a><div class=dropdown-menu><a class=dropdown-item href=/devra/posts/>Posts</a>
<a class=dropdown-item href=/devra/sections/>Sections</a><div class=dropdown-divider></div><a class=dropdown-item href=/devra/tags/>Tags</a></div></li><li class=nav-item><a class=nav-link href=http://rafed.github.io/>About</a></li><li class=nav-item><a class=nav-link href=/devra/contact/>Contact</a></li><li class=nav-item><a class=nav-link href=/devra/privacy/>Privacy</a></li></ul><form id=cse-search-box-form-id2 class="d-flex search-bar d-block d-sm-none" onsubmit='return executeQuery("xs")' role=search><input id=cse-search-input-box-id2 type=text class=form-control placeholder=Search>
<button class=btn type=submit>
<i class="fa fa-search"></i></button></form></div></nav></div></header><main class=blog-content><div class=container-md><div class=row><div class="col-lg-2 d-none d-xl-block"><div class=ad-left-offset></div><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-7125931910131040 data-ad-slot=3331960876 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div class="col-md-12 col-lg-8 px-lg-4"><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-7125931910131040 data-ad-slot=4914046999 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><h1 class=title>#04 - Kubernetes: From Writing Code to Deploying in Kubernetes</h1><div class="container-fluid px-0 mb-4"><div class="row align-items-end"><div class="col-md-4 date-time"><span class=date>Sep 7, 2021
</span>&#183;
<span class=time-to-read>3 mins read</span></div><div class="col-md-8 tags"><a href=/devra/tags/cloud><span class="tag bg-dark">cloud</span></a>
<a href=/devra/tags/kubernetes><span class="tag bg-dark">kubernetes</span></a></div></div></div><figure><img id=cover-image src=/devra/sections/kubernetes-minified--simplified/4.-kubernetes-code-to-deployment/cover.png alt="#04 - Kubernetes: From Writing Code to Deploying in Kubernetes"></figure><p>A typical Kubernetes workflow follows the following steps-</p><ol><li>Write code</li><li>Containerize app</li><li>Send to container registry</li><li>Deploy to Kubernetes</li></ol><div class=mermaid>graph TD
A[Write Code] --> B
B[Containerzie app] --> C
C[Send to container registry] --> D[Deploy to Kubernetes]</div><h4 id=1-write-code>1. Write Code</h4><p>This step is pretty self explanatory. We write code that solves a business problem. For microservices/distributed systems we write code in multiple small cohesive services so that they can be deployed independently.</p><h4 id=2-containerize-app>2. Containerize App</h4><p>Containers make deployment easy as it contains both the code and the environment needed for running. Containers are at the heart of Kubernetes because Kubernetes essentially runs and manages containers. Although containerization can be done manually, it is preferred to be done automatically through a CD pipeline. Creating a CD pipeline ensures that whenever code is pushed, a new container with the updated code is built.</p><h4 id=3-send-to-container-registry>3. Send to container registry</h4><p>After building a container it needs to be sent to a container registry. A container registry is like a vault where containers can be stored. Just as Github stores code, a container registry stores containers. Sending containers to a registry is necessary because when a Kubernetes deployment is made, the cluster pulls containers from the registry.</p><h4 id=4-deploy-to-kubernetes>4. Deploy to Kubernetes</h4><p>Finally, a deployment is made to the Kubernetes cluster. A YAML file containing the desired state of the cluster is defined and pushed to the Kubernetes engine. The Kubernetes engine pulls the containers from the registry to run and changes the cluster configuration to match the desired state mentioned in the YAML files.</p><h2 id=theory-of-deployments>Theory of Deployments</h2><p>In Kubernetes, a <em>deployment</em> determines how many Pods are to be deployed and how many ReplicaSets should be made. The relation between containers, pods, replicasets and deployments can be summarized by the following diagram.</p><p><img src=./deployment.png alt="Kubernetes Deployment object"></p><p>Code is placed in Containers. Containers are kept in Pods. How many replicas of a Pod should run is determined by replicasets. And all of this is defined in a deployment.</p><p>A deployment yaml will typically have a configuration like the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>apps/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Deployment</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>nginx-deployment</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>app</span>: <span style=color:#ae81ff>nginx</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>minReadyseconds</span>: <span style=color:#ae81ff>300</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>replicas</span>: <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>strategy</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>rollingupdate </span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>maxSurge</span>: <span style=color:#ae81ff>1</span>       
</span></span><span style=display:flex><span>        <span style=color:#f92672>maxUnavailable</span>: <span style=color:#ae81ff>0</span> 
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>RollingUpdate</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>template</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>app</span>: <span style=color:#ae81ff>nginx</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>containers</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>nginx</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>image</span>: <span style=color:#ae81ff>nginx:1.14.2</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>        - <span style=color:#f92672>containerPort</span>: <span style=color:#ae81ff>80</span>
</span></span></code></pre></div><p>What some of these fields mean are described below:</p><ul><li><strong>minReadySeconds</strong>: minimum number of seconds for which a newly created Pod should be ready without any of its containers crashing, for it to be considered available</li><li><strong>maxSurge</strong>: maximum number of Pods that can be created over the desired number of Pods</li><li><strong>maxUnavailable</strong>: maximum number of Pods that can be unavailable during the update process</li></ul><p>A deployment isn&rsquo;t accessible unless a <strong>service</strong> is attached to it (recall from the <a href=../2.-kubernetes-networking/>networking section</a>). Let&rsquo;s make the above deployment available though a service.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Service</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>nginx-deployment</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>run</span>: <span style=color:#ae81ff>nginx</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>port</span>: <span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>protocol</span>: <span style=color:#ae81ff>TCP</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>selector</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>run</span>: <span style=color:#ae81ff>nginx</span>
</span></span></code></pre></div><p>Now the deployed nginx service can be accessed and used.</p><p>That was all about how you can deploy your code to Kubernetes. Head on to the next section to learn about how you can <a href=../5.-kubernetes-auto-scaling>autoscale pods</a>.</p><div id=social-media-share><p><i>Sharing is caring!</i></p><div class=share-buttons><a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2frafed.github.io%2fdevra%2fsections%2fkubernetes-minified--simplified%2f4.-kubernetes-code-to-deployment%2f" onclick='return socialMediaPopUp(this.href,"",500,500),!1' title="Share on Facebook. Opens in a new window."><img src=/devra/icons/48px/facebook.png>
</a><a href="https://twitter.com/intent/tweet?text=%2304%20-%20Kubernetes%3a%20From%20Writing%20Code%20to%20Deploying%20in%20Kubernetes&url=https%3a%2f%2frafed.github.io%2fdevra%2fsections%2fkubernetes-minified--simplified%2f4.-kubernetes-code-to-deployment%2f" onclick='return socialMediaPopUp(this.href,"",500,500),!1' title="Share on Twitter. Opens in a new window."><img src=/devra/icons/48px/x.png>
</a><a href="http://www.reddit.com/submit?url=https%3a%2f%2frafed.github.io%2fdevra%2fsections%2fkubernetes-minified--simplified%2f4.-kubernetes-code-to-deployment%2f" onclick='return socialMediaPopUp(this.href,"",900,500),!1' title="Share on Reddit. Opens in a new window."><img src=/devra/icons/48px/reddit.png>
</a><a href=http://pinterest.com/pin/create/button/https://rafed.github.io/devra/sections/kubernetes-minified--simplified/4.-kubernetes-code-to-deployment/ onclick='return socialMediaPopUp(this.href,"",900,500),!1' title="Share on Pinterest. Opens in a new window."><img src=/devra/icons/48px/pinterest.png>
</a><a href="https://www.tumblr.com/widgets/share/tool?canonicalUrl=https%3a%2f%2frafed.github.io%2fdevra%2fsections%2fkubernetes-minified--simplified%2f4.-kubernetes-code-to-deployment%2f" onclick='return socialMediaPopUp(this.href,"",900,500),!1' title="Share on Tumblr. Opens in a new window."><img src=/devra/icons/48px/tumblr.png>
</a><a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2frafed.github.io%2fdevra%2fsections%2fkubernetes-minified--simplified%2f4.-kubernetes-code-to-deployment%2f
			&title=%2304%20-%20Kubernetes%3a%20From%20Writing%20Code%20to%20Deploying%20in%20Kubernetes&summary=%3cp%3eA%20typical%20Kubernetes%20workflow%20follows%20the%20following%20steps-%3c%2fp%3e%0a%3col%3e%0a%3cli%3eWrite%20code%3c%2fli%3e%0a%3cli%3eContainerize%20app%3c%2fli%3e%0a%3cli%3eSend%20to%20container%20registry%3c%2fli%3e%0a%3cli%3eDeploy%20to%20Kubernetes%3c%2fli%3e%0a%3c%2fol%3e%0a%3cdiv%20class%3d%22mermaid%22%3e%0a%20%20%20%20graph%20TD%0a%20%20%20%20A%5bWrite%20Code%5d%20--%3e%20B%0a%20%20%20%20B%5bContainerzie%20app%5d%20--%3e%20C%0a%20%20%20%20C%5bSend%20to%20container%20registry%5d%20--%3e%20D%5bDeploy%20to%20Kubernetes%5d%0a%3c%2fdiv%3e%0a%3ch4%20id%3d%221-write-code%22%3e1.%20Write%20Code%3c%2fh4%3e%0a%3cp%3eThis%20step%20is%20pretty%20self%20explanatory.%20We%20write%20code%20that%20solves%20a%20business%20problem.%20For%20microservices%2fdistributed%20systems%20we%20write%20code%20in%20multiple%20small%20cohesive%20services%20so%20that%20they%20can%20be%20deployed%20independently.%3c%2fp%3e&source=https%3a%2f%2frafed.github.io%2fdevra%2f" onclick='return socialMediaPopUp(this.href,"",900,500),!1' title="Share on LinkedIn. Opens in a new window."><img src=/devra/icons/48px/linkedin.png>
</a><a href="mailto:?subject=%2304%20-%20Kubernetes%3a%20From%20Writing%20Code%20to%20Deploying%20in%20Kubernetes&amp;body=Check out this site https%3a%2f%2frafed.github.io%2fdevra%2fsections%2fkubernetes-minified--simplified%2f4.-kubernetes-code-to-deployment%2f" title="Share via Email. Opens in a new window."><img src=/devra/icons/48px/email.png></a></div></div><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-7125931910131040 data-ad-slot=4914046999 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><br><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname=="localhost")return;var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,t="rafed",e.src="//"+t+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div><div class="col-lg-2 d-none d-xl-block"><div class=ad-right-offset></div><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-7125931910131040 data-ad-slot=3331960876 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div></main><footer class="text-center py-5"><p>© 2024 Rafed Muhammad Yasir.</p></footer><script async src="https://cse.google.com/cse.js?cx=000151824860492892407%3akd5zijxwj6a"></script><gcse:searchresults-only></gcse:searchresults-only></body></html>